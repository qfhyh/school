(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apartmentVisitor"],{"175b":function(t,o,e){},"25f8":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"apartmentVisitor"},[e("van-nav-bar",{attrs:{title:"访客登记","left-text":"返回","right-text":" ","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"top"},[e("van-cell-group",[e("van-popup",{model:{value:t.visible,callback:function(o){t.visible=o},expression:"visible"}}),e("van-cell",{attrs:{title:"校区","is-link":"",border:"",required:""},on:{click:function(o){t.campus=!0}},model:{value:t.sCampus,callback:function(o){t.sCampus=o},expression:"sCampus"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.campus,callback:function(o){t.campus=o},expression:"campus"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"校区",columns:t.campusList},on:{confirm:t.selectCampus,cancel:function(o){t.campus=!1}}})],1),e("van-cell",{attrs:{title:"公寓","is-link":"",border:"",required:""},on:{click:function(o){t.apartment=!0}},model:{value:t.sApartment,callback:function(o){t.sApartment=o},expression:"sApartment"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.apartment,callback:function(o){t.apartment=o},expression:"apartment"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"公寓",columns:t.apartmentList},on:{confirm:t.selectApartment,cancel:function(o){t.apartment=!1}}})],1),e("van-cell",{attrs:{title:"楼层","is-link":"",border:"",required:""},on:{click:function(o){t.floor=!0}},model:{value:t.sFloor,callback:function(o){t.sFloor=o},expression:"sFloor"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.floor,callback:function(o){t.floor=o},expression:"floor"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"楼层",columns:t.floorList},on:{confirm:t.selectFloor,cancel:function(o){t.floor=!1}}})],1),e("van-cell",{attrs:{title:"宿舍","is-link":"",border:"",required:""},on:{click:function(o){t.dorm=!0}},model:{value:t.sDorm,callback:function(o){t.sDorm=o},expression:"sDorm"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.dorm,callback:function(o){t.dorm=o},expression:"dorm"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"宿舍",columns:t.dormList},on:{confirm:t.selectDorm,cancel:function(o){t.dorm=!1}}})],1),e("van-cell",{attrs:{title:"拜访人","is-link":"",border:"",required:""},on:{click:function(o){t.person=!0}},model:{value:t.sPerson,callback:function(o){t.sPerson=o},expression:"sPerson"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.person,callback:function(o){t.person=o},expression:"person"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"拜访人",columns:t.personList},on:{confirm:t.selectPerson,cancel:function(o){t.person=!1}}})],1),e("van-cell",{attrs:{title:"来访时间","is-link":"",border:"",required:""},on:{click:function(o){t.time=!0}},model:{value:t.sTime,callback:function(o){t.sTime=o},expression:"sTime"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.time,callback:function(o){t.time=o},expression:"time"}},[e("van-datetime-picker",{attrs:{"show-toolbar":"",type:"datetime","min-date":t.minDate},on:{confirm:t.confirm,cancel:function(o){t.time=!1}}})],1),e("van-field",{attrs:{label:"携带物品",type:"textarea",placeholder:"请输入",rows:"1",autosize:""},model:{value:t.takeGoods,callback:function(o){t.takeGoods=o},expression:"takeGoods"}}),e("van-cell",{attrs:{value:"添加图片"}}),e("upload-img",{on:{imgData:t.imgData}})],1)],1),e("div",{staticClass:"btn-group"},[e("van-button",{staticClass:"btn blue",attrs:{round:"",size:"large"},on:{click:t.submitVisitor}},[t._v("提交")])],1)],1)},a=[],s=(e("7f7f"),e("ac6a"),e("f3e2"),e("96cf"),e("cb0c")),r=e("a302"),n=e("c583"),c={name:"apartmentVisitor",data:function(){return{visible:!1,sCampus:"请选择",sApartment:"请选择",sFloor:"请选择",sDorm:"请选择",sPerson:"请选择",sTime:"请选择",campus:!1,apartment:!1,floor:!1,dorm:!1,person:!1,time:!1,minDate:new Date,campusData:[],apartmentData:[],floorData:[],dormData:[],personData:[],campusList:[],apartmentList:[],floorList:[],dormList:[],personList:[],schoolId:"",buildingId:"",floorId:"",roomId:"",takeGoods:"",visitorData:{schoolId:"",schoolName:"",buildId:"",buildName:"",floolId:"",floolName:"",roomId:"",roomName:"",stuId:"",stuName:"",takeGoods:"",visitTime:"",photo:""},photoList:[],jPushData:{userId:"",mk:"susfangke",message:""},jPushTime:null}},components:{uploadImg:n["a"]},methods:{onClickLeft:function(){this.$router.go(-1)},confirm:function(t){this.time=!1,this.sTime=t.toLocaleString("chinese",{hour12:!1}),this.jPushTime=this.$moment(t).format("YYYY年MM月DD日HH时mm分")},getCampus:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o,e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])();case 2:o=t.sent,e=o.data,this.campusData=e,this.campusData.forEach(function(t){i.campusList.push(t.xXMC)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectCampus:function(t){var o=this;this.campus=!1,this.sCampus=t,this.sApartment="请选择",this.sFloor="请选择",this.sDorm="请选择",this.sPerson="请选择",this.apartmentList=[],this.floorList=[],this.dormList=[],this.personList=[],this.campusData.forEach(function(e){e.xXMC===t&&(o.schoolId=e.id,o.visitorData.schoolId=e.id,o.visitorData.schoolName=t)}),this.getApartment()},getApartment:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o,e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["h"])(this.schoolId);case 2:o=t.sent,e=o.data,this.apartmentData=e,this.apartmentData.forEach(function(t){i.apartmentList.push(t.mC)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectApartment:function(t){var o=this;this.apartment=!1,this.sApartment=t,this.sFloor="请选择",this.sDorm="请选择",this.sPerson="请选择",this.floorList=[],this.dormList=[],this.personList=[],this.apartmentData.forEach(function(e){e.mC===t&&(o.buildingId=e.id,o.visitorData.buildId=o.buildingId,o.visitorData.buildName=t)}),this.getFloor()},getFloor:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o,e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])(this.buildingId);case 2:o=t.sent,e=o.data,this.floorData=e,this.floorData.forEach(function(t){i.floorList.push(t.name)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectFloor:function(t){var o=this;this.floor=!1,this.sFloor=t,this.sDorm="请选择",this.sPerson="请选择",this.dormList=[],this.personList=[],this.floorData.forEach(function(e){e.name===t&&(o.floorId=e.id,o.visitorData.floolId=o.floorId,o.visitorData.floolName=t)}),this.getDorm()},getDorm:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o,e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["c"])(this.floorId);case 2:o=t.sent,e=o.data,this.dormData=e,this.dormData.forEach(function(t){i.dormList.push(t.name)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectDorm:function(t){var o=this;this.dorm=!1,this.sDorm=t,this.sPerson="请选择",this.personList=[],this.dormData.forEach(function(e){e.name===t&&(o.roomId=e.id,o.visitorData.roomId=o.roomId,o.visitorData.roomName=t)}),this.getPerson()},getPerson:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o,e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["i"])(this.roomId);case 2:o=t.sent,e=o.data,this.personData=e,this.personData.forEach(function(t){i.personList.push(t.userName)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectPerson:function(t){var o=this;this.person=!1,this.sPerson=t,this.personData.forEach(function(e){e.userName===t&&(o.stuId=e.userId,o.visitorData.stuId=o.stuId,o.visitorData.stuName=t,o.jPushData.userId=o.stuId)})},postVisitor:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.jPushData.message="".concat(this.jPushTime,"，在").concat(this.visitorData.buildName,"公寓您有一个访客。"),t.next=3,Object(r["e"])(this.visitorData);case 3:return o=t.sent,o.httpCode,this.$toast.success("提交成功！"),this.$router.go(-1),t.next=7,Object(r["f"])(this.jPushData);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),imgData:function(t){var o=this;t.filePrikeys.forEach(function(t){o.photoList.push(t.filePath)})},submitVisitor:function(){this.visitorData.takeGoods=this.takeGoods,this.visitorData.visitTime=this.sTime,this.visitorData.photo=this.photoList.join(","),""!==this.visitorData.schoolName?""!==this.visitorData.buildName?""!==this.visitorData.floolName?""!==this.visitorData.roomName?""!==this.visitorData.stuName?""!==this.visitorData.checkTime?this.postVisitor():this.$toast("请选择检查时间！"):this.$toast("请选择拜访人！"):this.$toast("请选择宿舍！"):this.$toast("请选择楼层！"):this.$toast("请选择公寓楼！"):this.$toast("请选择校区！")}},mounted:function(){this.getCampus()}},u=c,l=(e("ff20"),e("2877")),m=Object(l["a"])(u,i,a,!1,null,"6b7508b4",null);m.options.__file="apartmentVisitor.vue";o["default"]=m.exports},a302:function(t,o,e){"use strict";e.d(o,"b",function(){return a}),e.d(o,"h",function(){return s}),e.d(o,"a",function(){return r}),e.d(o,"c",function(){return n}),e.d(o,"i",function(){return c}),e.d(o,"e",function(){return u}),e.d(o,"d",function(){return l}),e.d(o,"g",function(){return m}),e.d(o,"f",function(){return p});var i=e("b775");function a(){return Object(i["a"])({method:"put",url:"/api/mobileSchoolInfo/read/getCurrSchoolInfoList",data:{}})}function s(t){return Object(i["a"])({method:"put",url:"/api/schoolBuilding/read/selectGongYuBuild",data:{schoolId:t}})}function r(t){return Object(i["a"])({method:"put",url:"/api/mobileSchoolFloor/read/asynchronousLoadingFloor",data:{buildingId:t}})}function n(t){return Object(i["a"])({method:"put",url:"/api/mobileSchoolRoom/read/asynchronousLoadingRoom",data:{floorId:t}})}function c(t){return Object(i["a"])({method:"put",url:"/api/mobileNDormBedinfoController/read/selectList",data:{roomId:t}})}function u(t){return Object(i["a"])({method:"post",url:"/api/mobileDormVisitController",data:t})}function l(){return Object(i["a"])({method:"put",url:"/api/mobileDic/read/dic",data:{type:"SSYHLX"}})}function m(t){return Object(i["a"])({method:"post",url:"/api/mobileDormSecurityCheck",data:t})}function p(t){return Object(i["a"])({method:"put",url:"/api/mobileJiGuangController/save/getUserId",data:t})}},ff20:function(t,o,e){"use strict";var i=e("175b"),a=e.n(i);a.a}}]);
//# sourceMappingURL=apartmentVisitor.140820e9.js.map