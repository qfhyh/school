{"remainingRequest":"E:\\PJH5\\school\\node_modules\\babel-loader\\lib\\index.js!E:\\PJH5\\school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\PJH5\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\PJH5\\school\\src\\views\\application\\exam\\examTea.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\PJH5\\school\\src\\views\\application\\exam\\examTea.vue","mtime":1545464922172},{"path":"E:\\PJH5\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544431688682},{"path":"E:\\PJH5\\school\\node_modules\\babel-loader\\lib\\index.js","mtime":1544431687962},{"path":"E:\\PJH5\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544431688682},{"path":"E:\\PJH5\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1544431709523}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\PJH5\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _objectSpread from \"E:\\\\PJH5\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport backButton from '@/components/backButton/backButton.vue';\nimport { getYearList as _getYearList, getTeaCouInfo as _getTeaCouInfo } from '@/services/exam';\nexport default {\n  name: 'examTea',\n  data: function data() {\n    return {\n      yearId: '',\n      gradeId: '',\n      classId: '',\n      pjClassId: '',\n      courseId: '',\n      taskId: '',\n      taskName: '',\n      yearName: '',\n      yearList: '',\n      isActive: 0,\n      isActiveNj: 0,\n      isActiveBj: 0,\n      isActiveRw: 0,\n      isActiveKm: 0,\n      isBzr: false,\n      gradeList: [],\n      taskList: [],\n      classList: [],\n      courseList: [],\n      showClassList: [],\n      showTaskList: [],\n      showCourseList: []\n    };\n  },\n  components: {\n    'back-button': backButton\n  },\n  computed: _objectSpread({}, mapGetters('system', ['userInfo'])),\n  methods: {\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    updateXn: function updateXn(item, index) {\n      this.isActive = index;\n      this.yearId = item.id;\n      this.getTeaCouInfo();\n    },\n    updateNj: function updateNj(item, index) {\n      this.isActiveNj = index;\n      this.gradeId = item.gradeId;\n      this.defaultClassListAndTaskList();\n    },\n    updateBj: function updateBj(item, index) {\n      this.isActiveBj = index;\n      this.classId = item.classId;\n      this.pjClassId = item.pjClassId;\n      this.isBzr = item.isBzr;\n      this.defaultCouList();\n    },\n    updateRw: function updateRw(item, index) {\n      this.isActiveRw = index;\n      this.taskId = item.examId;\n      this.taskName = item.examName;\n    },\n    updateKm: function updateKm(item, index) {\n      this.isActiveKm = index;\n      this.courseId = item.courseId;\n    },\n    // 数组去重\n    unique: function unique(arr, param) {\n      var res = new Map();\n      return arr.filter(function (arr) {\n        return !res.has(arr[param]) && res.set(arr[param], 1);\n      });\n    },\n    select: function select() {\n      this.$router.push({\n        name: 'examTeaResult',\n        params: {\n          taskId: this.taskId,\n          classId: this.classId,\n          courseId: this.courseId,\n          taskName: this.taskName\n        }\n      });\n    },\n    getYearList: function () {\n      var _getYearList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _getYearList();\n\n              case 2:\n                data = _context.sent;\n                this.yearId = data.data[0].id;\n                this.yearList = data.data;\n                this.getTeaCouInfo();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getYearList() {\n        return _getYearList2.apply(this, arguments);\n      };\n    }(),\n    getTeaCouInfo: function () {\n      var _getTeaCouInfo2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        var data;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.gradeList = [];\n                this.classList = [];\n                this.taskList = [];\n                this.courseList = [];\n                this.isBzr = false;\n                _context2.next = 7;\n                return _getTeaCouInfo({\n                  yearId: this.yearId,\n                  teaId: this.userInfo.id\n                });\n\n              case 7:\n                data = _context2.sent;\n                this.pjclassList = data.data.pjclassList;\n\n                if (this.pjclassList && this.pjclassList.length > 0) {\n                  this.pjclassList.forEach(function (element) {\n                    var njList = {};\n                    var bjList = {};\n                    njList.gradeId = element.schoolGrade.id;\n                    njList.gradeName = element.schoolGrade.name;\n                    bjList.classId = element.schoolClassInfo.id;\n                    bjList.className = element.schoolClassInfo.bJMC;\n                    bjList.pjClassId = element.id;\n                    bjList.gradeId = element.schoolGrade.id;\n\n                    if (element.bzrteadherId === _this.userInfo.id) {\n                      bjList.isBzr = true;\n                    } else {\n                      bjList.isBzr = false;\n                    }\n\n                    _this.gradeList.push(njList);\n\n                    _this.classList.push(bjList);\n                  });\n                  this.gradeList = this.unique(this.gradeList, 'gradeId');\n                  this.gradeId = this.gradeList[0].gradeId;\n                  this.classList = this.unique(this.classList, 'classId');\n                }\n\n                this.examTaskList = data.data.examTaskList;\n\n                if (this.examTaskList && this.examTaskList.length > 0) {\n                  this.examTaskList.forEach(function (element) {\n                    var ksList = {};\n                    ksList.examId = element.id;\n                    ksList.examName = element.examName;\n                    ksList.gradeId = element.gradeId;\n\n                    _this.taskList.push(ksList);\n                  });\n                  this.taskList = this.unique(this.taskList, 'examId');\n                }\n\n                this.defaultClassListAndTaskList();\n                this.cctList = data.data.cctList;\n\n                if (this.cctList && this.cctList.length > 0) {\n                  this.cctList.forEach(function (element) {\n                    var dkList = {};\n                    dkList.pjClassId = element.classId;\n                    dkList.courseId = element.course.id;\n                    dkList.courseName = element.course.kcmc;\n\n                    _this.courseList.push(dkList);\n                  });\n                }\n\n                this.defaultCouList();\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function getTeaCouInfo() {\n        return _getTeaCouInfo2.apply(this, arguments);\n      };\n    }(),\n    defaultClassListAndTaskList: function defaultClassListAndTaskList() {\n      var _this2 = this;\n\n      this.showClassList = [];\n      this.classList.forEach(function (element) {\n        if (element.gradeId === _this2.gradeId) {\n          _this2.showClassList.push(element);\n        }\n      });\n\n      if (this.showClassList.length > 0) {\n        this.classId = this.showClassList[0].classId;\n        this.pjClassId = this.showClassList[0].pjClassId;\n        this.isBzr = this.showClassList[0].isBzr;\n      }\n\n      this.showTaskList = [];\n      this.taskList.forEach(function (element) {\n        if (element.gradeId === _this2.gradeId) {\n          _this2.showTaskList.push(element);\n        }\n      });\n\n      if (this.showTaskList.length > 0) {\n        this.taskId = this.showTaskList[0].examId;\n        this.taskName = this.showTaskList[0].examName;\n      }\n    },\n    defaultCouList: function defaultCouList() {\n      var _this3 = this;\n\n      this.showCourseList = [];\n\n      if (this.isBzr) {\n        this.showCourseList.push({\n          pjClassId: this.pjClassId,\n          courseId: '',\n          courseName: '总分'\n        });\n      }\n\n      this.courseList.forEach(function (element) {\n        if (element.pjClassId === _this3.pjClassId) {\n          _this3.showCourseList.push(element);\n        }\n      });\n\n      if (this.showCourseList.length > 0) {\n        this.courseId = this.showCourseList[0].courseId;\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.getYearList();\n  }\n};",{"version":3,"sources":["examTea.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"addressBook\">\r\n    <back-button></back-button>\r\n    <van-nav-bar\r\n      title=\"成绩系统\"\r\n      left-text=\"返回\"\r\n      right-text=\" \"\r\n      left-arrow\r\n      fixed\r\n      @click-left=\"onClickLeft\"/>\r\n    <div>\r\n      <p class=\"title\">学 年</p>\r\n      <div class=\"select\">\r\n        <button  v-for=\"(item,index) in this.yearList\" :key=\"index\" v-if=\"index<6\"\r\n        :class=\"{active:index === isActive}\" @click=\"updateXn(item,index)\">\r\n          {{item.name}}</button>\r\n      </div>\r\n      <div style=\"background:#F8F8F8;height:7px;\"></div>\r\n      <p class=\"title\">年 级</p>\r\n      <div class=\"select\">\r\n        <button  v-for=\"(item,index) in this.gradeList\" :key=\"index\"\r\n        :class=\"{active:index === isActiveNj}\" @click=\"updateNj(item,index)\">\r\n          {{item.gradeName}}</button>\r\n      </div>\r\n      <div style=\"background:#F8F8F8;height:7px;\"></div>\r\n      <p class=\"title\">班 级</p>\r\n      <div class=\"select\">\r\n        <button  v-for=\"(item,index) in this.showClassList\" :key=\"index\"\r\n        :class=\"{active:index === isActiveBj}\" @click=\"updateBj(item,index)\">\r\n          {{item.className}}</button>\r\n      </div>\r\n      <div style=\"background:#F8F8F8;height:7px;\"></div>\r\n      <p class=\"title\">考试名称</p>\r\n      <div class=\"exam\">\r\n        <button  v-for=\"(item,index) in this.showTaskList\" :key=\"index\"\r\n        :class=\"{active:index === isActiveRw}\" @click=\"updateRw(item,index)\">\r\n          {{item.examName}}</button>\r\n      </div>\r\n      <div style=\"background:#F8F8F8;height:7px;\"></div>\r\n      <p class=\"title\">查询科目</p>\r\n      <div class=\"select\">\r\n        <button  v-for=\"(item,index) in this.showCourseList\" :key=\"index\"\r\n        :class=\"{active:index === isActiveKm}\" @click=\"updateKm(item,index)\">\r\n          {{item.courseName}}</button>\r\n      </div>\r\n      <button class=\"submit\" @click=\"select()\">查  询</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport backButton from '@/components/backButton/backButton.vue';\r\nimport { getYearList, getTeaCouInfo } from '@/services/exam';\r\n\r\nexport default {\r\n  name: 'examTea',\r\n  data() {\r\n    return {\r\n      yearId: '',\r\n      gradeId: '',\r\n      classId: '',\r\n      pjClassId: '',\r\n      courseId: '',\r\n      taskId: '',\r\n      taskName: '',\r\n      yearName: '',\r\n      yearList: '',\r\n      isActive: 0,\r\n      isActiveNj: 0,\r\n      isActiveBj: 0,\r\n      isActiveRw: 0,\r\n      isActiveKm: 0,\r\n      isBzr: false,\r\n      gradeList: [],\r\n      taskList: [],\r\n      classList: [],\r\n      courseList: [],\r\n      showClassList: [],\r\n      showTaskList: [],\r\n      showCourseList: [],\r\n    };\r\n  },\r\n  components: {\r\n    'back-button': backButton,\r\n  },\r\n  computed: {\r\n    ...mapGetters('system', ['userInfo']),\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    updateXn(item, index) {\r\n      this.isActive = index;\r\n      this.yearId = item.id;\r\n      this.getTeaCouInfo();\r\n    },\r\n    updateNj(item, index) {\r\n      this.isActiveNj = index;\r\n      this.gradeId = item.gradeId;\r\n      this.defaultClassListAndTaskList();\r\n    },\r\n    updateBj(item, index) {\r\n      this.isActiveBj = index;\r\n      this.classId = item.classId;\r\n      this.pjClassId = item.pjClassId;\r\n      this.isBzr = item.isBzr;\r\n      this.defaultCouList();\r\n    },\r\n    updateRw(item, index) {\r\n      this.isActiveRw = index;\r\n      this.taskId = item.examId;\r\n      this.taskName = item.examName;\r\n    },\r\n    updateKm(item, index) {\r\n      this.isActiveKm = index;\r\n      this.courseId = item.courseId;\r\n    },\r\n    // 数组去重\r\n    unique(arr, param) {\r\n      const res = new Map();\r\n      return arr.filter(arr => !res.has(arr[param]) && res.set(arr[param], 1));\r\n    },\r\n    select() {\r\n      this.$router.push({\r\n        name: 'examTeaResult',\r\n        params: {\r\n          taskId: this.taskId,\r\n          classId: this.classId,\r\n          courseId: this.courseId,\r\n          taskName: this.taskName,\r\n        },\r\n      });\r\n    },\r\n    async getYearList() {\r\n      const data = await getYearList();\r\n      this.yearId = data.data[0].id;\r\n      this.yearList = data.data;\r\n      this.getTeaCouInfo();\r\n    },\r\n    async getTeaCouInfo() {\r\n      this.gradeList = [];\r\n      this.classList = [];\r\n      this.taskList = [];\r\n      this.courseList = [];\r\n      this.isBzr = false;\r\n      const data = await getTeaCouInfo({ yearId: this.yearId, teaId: this.userInfo.id });\r\n      this.pjclassList = data.data.pjclassList;\r\n      if (this.pjclassList && this.pjclassList.length > 0) {\r\n        this.pjclassList.forEach((element) => {\r\n          const njList = {};\r\n          const bjList = {};\r\n          njList.gradeId = element.schoolGrade.id;\r\n          njList.gradeName = element.schoolGrade.name;\r\n          bjList.classId = element.schoolClassInfo.id;\r\n          bjList.className = element.schoolClassInfo.bJMC;\r\n          bjList.pjClassId = element.id;\r\n          bjList.gradeId = element.schoolGrade.id;\r\n          if (element.bzrteadherId === this.userInfo.id) {\r\n            bjList.isBzr = true;\r\n          } else {\r\n            bjList.isBzr = false;\r\n          }\r\n          this.gradeList.push(njList);\r\n          this.classList.push(bjList);\r\n        });\r\n        this.gradeList = this.unique(this.gradeList, 'gradeId');\r\n        this.gradeId = this.gradeList[0].gradeId;\r\n        this.classList = this.unique(this.classList, 'classId');\r\n      }\r\n      this.examTaskList = data.data.examTaskList;\r\n      if (this.examTaskList && this.examTaskList.length > 0) {\r\n        this.examTaskList.forEach((element) => {\r\n          const ksList = {};\r\n          ksList.examId = element.id;\r\n          ksList.examName = element.examName;\r\n          ksList.gradeId = element.gradeId;\r\n          this.taskList.push(ksList);\r\n        });\r\n        this.taskList = this.unique(this.taskList, 'examId');\r\n      }\r\n      this.defaultClassListAndTaskList();\r\n      this.cctList = data.data.cctList;\r\n      if (this.cctList && this.cctList.length > 0) {\r\n        this.cctList.forEach((element) => {\r\n          const dkList = {};\r\n          dkList.pjClassId = element.classId;\r\n          dkList.courseId = element.course.id;\r\n          dkList.courseName = element.course.kcmc;\r\n          this.courseList.push(dkList);\r\n        });\r\n      }\r\n      this.defaultCouList();\r\n    },\r\n    defaultClassListAndTaskList() {\r\n      this.showClassList = [];\r\n      this.classList.forEach((element) => {\r\n        if (element.gradeId === this.gradeId) {\r\n          this.showClassList.push(element);\r\n        }\r\n      });\r\n      if (this.showClassList.length > 0) {\r\n        this.classId = this.showClassList[0].classId;\r\n        this.pjClassId = this.showClassList[0].pjClassId;\r\n        this.isBzr = this.showClassList[0].isBzr;\r\n      }\r\n      this.showTaskList = [];\r\n      this.taskList.forEach((element) => {\r\n        if (element.gradeId === this.gradeId) {\r\n          this.showTaskList.push(element);\r\n        }\r\n      });\r\n      if (this.showTaskList.length > 0) {\r\n        this.taskId = this.showTaskList[0].examId;\r\n        this.taskName = this.showTaskList[0].examName;\r\n      }\r\n    },\r\n    defaultCouList() {\r\n      this.showCourseList = [];\r\n      if (this.isBzr) {\r\n        this.showCourseList.push({ pjClassId: this.pjClassId, courseId: '', courseName: '总分' });\r\n      }\r\n      this.courseList.forEach((element) => {\r\n        if (element.pjClassId === this.pjClassId) {\r\n          this.showCourseList.push(element);\r\n        }\r\n      });\r\n      if (this.showCourseList.length > 0) {\r\n        this.courseId = this.showCourseList[0].courseId;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getYearList();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n  .addressBook {\r\n    padding-top: 44px;\r\n  }\r\n  .title {\r\n    padding: 4%;\r\n  }\r\n  .select {\r\n    padding: 0 2%;\r\n    margin: 0 auto;\r\n    margin-bottom: 2%;\r\n  }\r\n  .select button {\r\n    width: 29.3%;\r\n    border:1px solid#E0E0E0;\r\n    border-radius:0.4em;\r\n    padding: 2% 0;\r\n    margin:0 2%;\r\n    margin-bottom: 1%;\r\n  }\r\n  .exam {\r\n    padding: 0 2%;\r\n    margin: 0 auto;\r\n    margin-bottom: 2%;\r\n  }\r\n  .exam button {\r\n    width: 92%;\r\n    border:1px solid#E0E0E0;\r\n    border-radius:0.4em;\r\n    padding: 2% 0;\r\n    margin:0 2%;\r\n    margin-bottom: 1%;\r\n  }\r\n  .active {\r\n    background: #3399FF;\r\n    color: #eee;\r\n  }\r\n  .submit {\r\n    width: 70%;\r\n    color: #eee;\r\n    background: #3399FF;\r\n    border:1px solid#E0E0E0;\r\n    border-radius:1em;\r\n    padding: 2% 0;\r\n    margin:4% 15%;\r\n    margin-bottom:10%;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src\\views\\application\\exam"}]}