{"remainingRequest":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\application\\grant\\grantNoticeDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\application\\grant\\grantNoticeDetail.vue","mtime":1544410028728},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js","mtime":1544410008076},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1544410027082}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\\\u9752\\u5CF0\\u8F6F\\u4EF6\\\\\\u901A\\u7528\\u5E73\\u53F0\\\\2018\\u6559\\u52A1\\\\vueProject\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetchNoticeDetail } from '@/services/grant';\nimport backButton from '@/components/backButton/backButton.vue';\nexport default {\n  name: 'grantNoticeDetail',\n  data: function data() {\n    return {\n      xbList: [],\n      classList: [],\n      grantList: [],\n      grantData: {\n        name: '',\n        planId: '',\n        content: '',\n        publicityTime: '',\n        planType: ''\n      },\n      allSourceData: [],\n      grantLs: null,\n      navback: false,\n      appJSObject: window.AppJSObject\n    };\n  },\n  components: {\n    'back-button': backButton\n  },\n  methods: {\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    resetTree: function resetTree(sourceData) {\n      var list = [];\n      sourceData.forEach(function (item) {\n        for (var i = 0; i < list.length; i += 1) {\n          if (list[i].deptName === item.deptName) {\n            list[i].fileList.push(item);\n            return;\n          }\n        }\n\n        list.push({\n          deptName: item.deptName,\n          fileList: [item]\n        });\n      });\n      return list;\n    },\n    resetclassTree: function resetclassTree(sourceData) {\n      var list = [];\n      sourceData.forEach(function (item) {\n        for (var i = 0; i < list.length; i += 1) {\n          if (list[i].className === item.className) {\n            list[i].fileList.push(item);\n            return;\n          }\n        }\n\n        list.push({\n          deptName: item.deptName,\n          className: item.className,\n          fileList: [item]\n        });\n      });\n      return list;\n    },\n    resetArray: function resetArray(xbList, classList) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = xbList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var data = _step.value;\n          data.fileList = [];\n          data.rowspan = 0;\n          data.newarray = [];\n\n          for (var i = 0; i < classList.length; i += 1) {\n            if (data.deptName === classList[i].deptName) {\n              data.fileList.push(classList[i]);\n              data.rowspan += parseInt(classList[i].fileList.length, 10);\n              data.newarray = new Array(data.rowspan);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.grantList = xbList;\n    },\n    getMessage: function () {\n      var _getMessage = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(noticeData) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetchNoticeDetail(noticeData);\n\n              case 2:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.allSourceData = data;\n                this.xbList = this.resetTree(data);\n                this.classList = this.resetclassTree(data);\n                return _context.abrupt(\"return\", this.resetArray(this.xbList, this.classList));\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getMessage(_x) {\n        return _getMessage.apply(this, arguments);\n      };\n    }()\n  },\n  mounted: function mounted() {\n    if (!this.$route.params.item) {\n      this.grantLs = this.appJSObject.getName();\n      this.grantData = JSON.parse(this.grantLs);\n      this.navback = true;\n    } else {\n      this.grantData = {\n        name: this.$route.params.item.name,\n        planId: this.$route.params.item.type,\n        content: this.$route.params.item.content,\n        publicityTime: this.$route.params.item.publicityTime,\n        planType: this.$route.params.item.planType\n      };\n    }\n\n    this.getMessage(this.grantData);\n  }\n};",{"version":3,"sources":["grantNoticeDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"grantNotice\">\r\n    <div v-if=\"navback\">\r\n      <back-button></back-button>\r\n    </div>\r\n    <van-nav-bar\r\n      title=\"奖助公示详情\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      fixed\r\n      @click-left=\"onClickLeft\"/>\r\n      <h3>{{grantData.name}}</h3>\r\n      <p>{{grantData.content}}</p>\r\n      <div class=\"float-right\">\r\n        <span>学生处</span>\r\n        <span class=\"time\">{{grantData.publicityTime}}</span>\r\n      </div>\r\n      <div v-if=\"grantData.planType=='1' || grantData.planType=='2' || grantData.planType=='3'\r\n       || grantData.planType=='4' || grantData.planType=='5' || grantData.planType=='6'\r\n        || grantData.planType=='8'\">\r\n        <table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" style=\"margin:auto\">\r\n          <tr v-for=\"(xb, idx) in grantList\" :key=\"idx\">\r\n            <td style=\"width:22%;\">{{xb.deptName}}</td>\r\n            <td>\r\n            <table v-for=\"(classes, j) in xb.fileList\" :key=\"j\">\r\n              <tr>\r\n                <td style=\"border-bottom:1px solid #000; border-right:1px solid #000;width:28%;\">\r\n                  {{classes.className}}\r\n                </td>\r\n                <td>\r\n                  <table v-for=\"(dc, k) in classes.fileList\" :key=\"k\">\r\n                  <tr>\r\n                    <td style=\"border-bottom:1px solid #000; border-right:1px solid #000;\r\n                     width:100px; height:40px\">\r\n                      {{dc.levelname}}\r\n                    </td>\r\n                    <td style=\"border-bottom:1px solid #000;\">\r\n                      {{dc.stuName}}\r\n                    </td>\r\n                  </tr>\r\n                  </table>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n      <div v-if=\"grantData.planType=='7' \">\r\n        <table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" style=\"table-layout: fixed;\">\r\n          <tr v-for=\"(xb, idx) in allSourceData\" :key=\"idx\">\r\n            <td style=\"width:100px;\">{{xb.deptName}}</td>\r\n            <td>{{xb.className}}</td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n      <div v-if=\"grantData.planType=='9' \">\r\n        <table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" style=\"table-layout: fixed;\">\r\n          <tr v-for=\"(xb, idx) in allSourceData\" :key=\"idx\">\r\n            <td style=\"width:100px;\">{{xb.deptName}}</td>\r\n            <td>{{xb.pubTypeName}}</td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fetchNoticeDetail } from '@/services/grant';\r\nimport backButton from '@/components/backButton/backButton.vue';\r\n\r\nexport default {\r\n  name: 'grantNoticeDetail',\r\n  data() {\r\n    return {\r\n      xbList: [],\r\n      classList: [],\r\n      grantList: [],\r\n      grantData: {\r\n        name: '',\r\n        planId: '',\r\n        content: '',\r\n        publicityTime: '',\r\n        planType: '',\r\n      },\r\n      allSourceData: [],\r\n      grantLs: null,\r\n      navback: false,\r\n      appJSObject: window.AppJSObject,\r\n    };\r\n  },\r\n  components: {\r\n    'back-button': backButton,\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    resetTree(sourceData) {\r\n      const list = [];\r\n      sourceData.forEach((item) => {\r\n        for (let i = 0; i < list.length; i += 1) {\r\n          if (list[i].deptName === item.deptName) {\r\n            list[i].fileList.push(item);\r\n            return;\r\n          }\r\n        }\r\n        list.push({\r\n          deptName: item.deptName,\r\n          fileList: [item],\r\n        });\r\n      });\r\n      return list;\r\n    },\r\n    resetclassTree(sourceData) {\r\n      const list = [];\r\n      sourceData.forEach((item) => {\r\n        for (let i = 0; i < list.length; i += 1) {\r\n          if (list[i].className === item.className) {\r\n            list[i].fileList.push(item);\r\n            return;\r\n          }\r\n        }\r\n        list.push({ deptName: item.deptName, className: item.className, fileList: [item] });\r\n      });\r\n      return list;\r\n    },\r\n    resetArray(xbList, classList) {\r\n      for (const data of xbList) {\r\n        data.fileList = [];\r\n        data.rowspan = 0;\r\n        data.newarray = [];\r\n        for (let i = 0; i < classList.length; i += 1) {\r\n          if (data.deptName === classList[i].deptName) {\r\n            data.fileList.push(classList[i]);\r\n            data.rowspan += parseInt(classList[i].fileList.length, 10);\r\n            data.newarray = new Array(data.rowspan);\r\n          }\r\n        }\r\n      }\r\n      this.grantList = xbList;\r\n    },\r\n    async getMessage(noticeData) {\r\n      const { data } = await fetchNoticeDetail(noticeData);\r\n      this.allSourceData = data;\r\n      this.xbList = this.resetTree(data);\r\n      this.classList = this.resetclassTree(data);\r\n      return this.resetArray(this.xbList, this.classList);\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!this.$route.params.item) {\r\n      this.grantLs = this.appJSObject.getName();\r\n      this.grantData = JSON.parse(this.grantLs);\r\n      this.navback = true;\r\n    } else {\r\n      this.grantData = {\r\n        name: this.$route.params.item.name,\r\n        planId: this.$route.params.item.type,\r\n        content: this.$route.params.item.content,\r\n        publicityTime: this.$route.params.item.publicityTime,\r\n        planType: this.$route.params.item.planType,\r\n      };\r\n    }\r\n    this.getMessage(this.grantData);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.grantNotice {\r\n  padding-top: 46px;\r\n  h3 {\r\n    text-align: center;\r\n  }\r\n  p {\r\n    text-indent: 2em;\r\n  }\r\n  .float-right {\r\n    float: right;\r\n    span {\r\n      display: block;\r\n      text-align: center;\r\n    }\r\n  }\r\n  table {\r\n    margin: 0 !important;\r\n    width: 100% !important;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views\\application\\grant"}]}