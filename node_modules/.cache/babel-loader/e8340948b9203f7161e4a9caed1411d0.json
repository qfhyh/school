{"remainingRequest":"E:\\vue\\school\\node_modules\\babel-loader\\lib\\index.js!E:\\vue\\school\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\vue\\school\\src\\router\\guard.js","dependencies":[{"path":"E:\\vue\\school\\src\\router\\guard.js","mtime":1543195924000},{"path":"E:\\vue\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1535070530000},{"path":"E:\\vue\\school\\node_modules\\babel-loader\\lib\\index.js","mtime":1539569622000},{"path":"E:\\vue\\school\\node_modules\\eslint-loader\\index.js","mtime":1539569628000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n\nvar _this = this;\n\nimport router from './router';\nimport store from '../store/';\nimport { getThreeProtocol } from '../services/work'; // import { login } from '../services/api';\n\nrouter.beforeEach(function (to, from, next) {\n  if (to.meta && to.meta.webview) {\n    var url = \"\".concat(window.location.origin, \"/#/\").concat(to.path);\n    window.overWatch.navigateTo(url);\n    next(false);\n  }\n\n  if (to.name === 'workProtocol') {\n    var user = {\n      userId: store.state.system.userInfo.id\n    };\n    getThreeProtocol(user).then(function (_ref) {\n      var data = _ref.data;\n      console.log(data);\n      next(false);\n    }).catch(function () {\n      _this.$toast('服务器忙');\n\n      next(false);\n    });\n  }\n\n  if (to.meta && to.meta.tabBar) {\n    store.dispatch('system/showTabbar', {});\n  } else {\n    store.dispatch('system/hideTabbar', {});\n  } // APP内嵌截取url字符串添加token\n  // if (!window.localStorage.getItem('token')) {\n  // const navurl = window.location.href;\n  // const navurl = 'http://192.168.10.92:8080//#/grantNoticeList?token=105284917404157542720181018170938';\n  // const url = navurl.split('?')[1];\n  // const appdata = navurl.split('?');\n  // const tokenData = appdata[1].split('=')[1];\n  // window.localStorage.setItem('token', tokenData);\n  // const page = appdata[0].split('=')[1];\n  // router.push({ name: page });\n  // }\n  // app集成\n  // const appJSObject = window.AppJSObject;\n  // // 交校\n  // const token = appJSObject.getToken();\n  // window.localStorage.setItem('token', token);\n  // 财专\n  // v1\n  // const accessToken = appJSObject.getAccessToken();\n  // window.localStorage.setItem('accessToken', accessToken);\n  // const userInfo = appJSObject.getUserInfo();\n  // store.dispatch('system/setUserInfo', userInfo);\n  // v2\n  // const accessToken = appJSObject.getAccessToken();\n  // window.localStorage.setItem('accessToken', accessToken);\n  // const userInfo = appJSObject.getUserInfo();\n  // store.dispatch('system/setUserInfo', JSON.parse(userInfo));\n  // const loginForm = {\n  //   account: appJSObject.getUserAccount(),\n  //   password: appJSObject.getUserPassWord(),\n  // };\n  // login(loginForm).then((resp) => {\n  //   store.dispatch('system/setToken', resp.data.accessToken);\n  //   store.dispatch('system/setUserInfo', resp.data.user);\n  //   store.dispatch('system/setMenu', resp.data.menus);\n  //   window.localStorage.setItem('accessToken', resp.data.accessToken);\n  // });\n  // setTimeout(() => {\n  //   next();\n  // }, 1500);\n\n\n  next();\n});",{"version":3,"sources":["E:\\vue\\school\\src\\router\\guard.js"],"names":["router","store","getThreeProtocol","beforeEach","to","from","next","meta","webview","url","window","location","origin","path","overWatch","navigateTo","name","user","userId","state","system","userInfo","id","then","data","console","log","catch","$toast","tabBar","dispatch"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,SAASC,gBAAT,QAAiC,kBAAjC,C,CACA;;AAEAF,OAAOG,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAIF,GAAGG,IAAH,IAAWH,GAAGG,IAAH,CAAQC,OAAvB,EAAgC;AAC9B,QAAMC,gBAASC,OAAOC,QAAP,CAAgBC,MAAzB,gBAAqCR,GAAGS,IAAxC,CAAN;AACAH,WAAOI,SAAP,CAAiBC,UAAjB,CAA4BN,GAA5B;AACAH,SAAK,KAAL;AACD;;AACD,MAAIF,GAAGY,IAAH,KAAY,cAAhB,EAAgC;AAC9B,QAAMC,OAAO;AACXC,cAAQjB,MAAMkB,KAAN,CAAYC,MAAZ,CAAmBC,QAAnB,CAA4BC;AADzB,KAAb;AAGApB,qBAAiBe,IAAjB,EAAuBM,IAAvB,CAA4B,gBAAc;AAAA,UAAXC,IAAW,QAAXA,IAAW;AACxCC,cAAQC,GAAR,CAAYF,IAAZ;AACAlB,WAAK,KAAL;AACD,KAHD,EAGGqB,KAHH,CAGS,YAAM;AACb,YAAKC,MAAL,CAAY,MAAZ;;AACAtB,WAAK,KAAL;AACD,KAND;AAOD;;AAED,MAAIF,GAAGG,IAAH,IAAWH,GAAGG,IAAH,CAAQsB,MAAvB,EAA+B;AAC7B5B,UAAM6B,QAAN,CAAe,mBAAf,EAAoC,EAApC;AACD,GAFD,MAEO;AACL7B,UAAM6B,QAAN,CAAe,mBAAf,EAAoC,EAApC;AACD,GAvBmC,CAwBpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAxB;AACD,CAlED","sourcesContent":["import router from './router';\r\nimport store from '../store/';\r\nimport { getThreeProtocol } from '../services/work';\r\n// import { login } from '../services/api';\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.meta && to.meta.webview) {\r\n    const url = `${window.location.origin}/#/${to.path}`;\r\n    window.overWatch.navigateTo(url);\r\n    next(false);\r\n  }\r\n  if (to.name === 'workProtocol') {\r\n    const user = {\r\n      userId: store.state.system.userInfo.id,\r\n    };\r\n    getThreeProtocol(user).then(({ data }) => {\r\n      console.log(data);\r\n      next(false);\r\n    }).catch(() => {\r\n      this.$toast('服务器忙');\r\n      next(false);\r\n    });\r\n  }\r\n\r\n  if (to.meta && to.meta.tabBar) {\r\n    store.dispatch('system/showTabbar', {});\r\n  } else {\r\n    store.dispatch('system/hideTabbar', {});\r\n  }\r\n  // APP内嵌截取url字符串添加token\r\n  // if (!window.localStorage.getItem('token')) {\r\n  // const navurl = window.location.href;\r\n  // const navurl = 'http://192.168.10.92:8080//#/grantNoticeList?token=105284917404157542720181018170938';\r\n  // const url = navurl.split('?')[1];\r\n  // const appdata = navurl.split('?');\r\n  // const tokenData = appdata[1].split('=')[1];\r\n  // window.localStorage.setItem('token', tokenData);\r\n  // const page = appdata[0].split('=')[1];\r\n  // router.push({ name: page });\r\n  // }\r\n  // app集成\r\n  // const appJSObject = window.AppJSObject;\r\n  // // 交校\r\n  // const token = appJSObject.getToken();\r\n  // window.localStorage.setItem('token', token);\r\n  // 财专\r\n  // v1\r\n  // const accessToken = appJSObject.getAccessToken();\r\n  // window.localStorage.setItem('accessToken', accessToken);\r\n  // const userInfo = appJSObject.getUserInfo();\r\n  // store.dispatch('system/setUserInfo', userInfo);\r\n  // v2\r\n  // const accessToken = appJSObject.getAccessToken();\r\n  // window.localStorage.setItem('accessToken', accessToken);\r\n  // const userInfo = appJSObject.getUserInfo();\r\n  // store.dispatch('system/setUserInfo', JSON.parse(userInfo));\r\n\r\n  // const loginForm = {\r\n  //   account: appJSObject.getUserAccount(),\r\n  //   password: appJSObject.getUserPassWord(),\r\n  // };\r\n  // login(loginForm).then((resp) => {\r\n  //   store.dispatch('system/setToken', resp.data.accessToken);\r\n  //   store.dispatch('system/setUserInfo', resp.data.user);\r\n  //   store.dispatch('system/setMenu', resp.data.menus);\r\n  //   window.localStorage.setItem('accessToken', resp.data.accessToken);\r\n  // });\r\n  // setTimeout(() => {\r\n  //   next();\r\n  // }, 1500);\r\n  next();\r\n});\r\n"]}]}